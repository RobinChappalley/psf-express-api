openapi: 3.0.0
info:
  title: Camps API
  version: 1.0.0

paths:
  ########################
  # AUTHENTICATION
  ########################

  /login:
    post:
      tags: [Authentication]
      summary: Connexion utilisateur
      description: Authentifie un utilisateur et retourne un token JWT valide 7 jours
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email: { type: string, format: email }
                password: { type: string }
      responses:
        "200":
          description: Connexion réussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: "#/components/schemas/User"
                  token: { type: string, description: "JWT token" }
        "400":
          description: Données invalides
        "401":
          description: Identifiants invalides
        "500":
          description: Erreur interne du serveur

  /logout:
    post:
      tags: [Authentication]
      summary: Déconnexion utilisateur
      description: Déconnecte l'utilisateur (retourne un message de succès)
      responses:
        "200":
          description: Déconnexion réussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: { type: string, example: "Logged out successfully" }
        "500":
          description: Erreur interne du serveur

  /signup:
    post:
      tags: [Authentication]
      summary: Inscription d'un nouveau parent
      description: |
        Crée un nouveau compte utilisateur avec le rôle "parent".
        Cette route est publique (pas d'authentification requise).
        Retourne un token JWT permettant une connexion immédiate.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - firstname
                - lastname
              properties:
                email:
                  type: string
                  format: email
                  description: "Email unique de l'utilisateur"
                password:
                  type: string
                  minLength: 6
                  description: "Mot de passe (minimum 6 caractères)"
                firstname:
                  type: string
                  minLength: 1
                  maxLength: 20
                  description: "Prénom"
                lastname:
                  type: string
                  minLength: 1
                  maxLength: 20
                  description: "Nom de famille"
      responses:
        "201":
          description: Compte créé avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: "JWT token valide 7 jours"
                  user:
                    type: object
                    properties:
                      id: { type: string }
                      email: { type: string }
                      firstname: { type: string }
                      lastname: { type: string }
                      role:
                        type: array
                        items: { type: string }
                        example: ["parent"]
        "400":
          description: Données invalides (email déjà utilisé, champs manquants, etc.)
        "500":
          description: Erreur interne du serveur

  ########################
  # CAMPS
  ########################

  /camps:
    get:
      tags: [Camps]
      summary: Récupérer la liste de tous les camps
      responses:
        "200":
          description: Liste de camps
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Camp"
        "500":
          description: Erreur interne du serveur
    post:
      tags: [Camps]
      summary: Ajouter un camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
              properties:
                title: { type: string }
                startDate: { type: string, format: date-time }
                endDate: { type: string, format: date-time }
                subStartDatetime: { type: string, format: date-time }
                subEndDatetime: { type: string, format: date-time }
                gpsTrack: { type: object }
      responses:
        "201":
          description: Camp créé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Camp"
        "400":
          description: Données invalides
        "500":
          description: Erreur interne du serveur

  /camps/{id}:
    get:
      tags: [Camps]
      summary: Récupérer un camp
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Camp trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Camp"
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [Camps]
      summary: Mettre à jour un camp
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title: { type: string }
                startDate: { type: string, format: date-time }
                endDate: { type: string, format: date-time }
                subStartDatetime: { type: string, format: date-time }
                subEndDatetime: { type: string, format: date-time }
                gpsTrack: { type: object }
      responses:
        "200":
          description: Camp mis à jour
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Camp"
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Camps]
      summary: Supprimer un camp
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Camp supprimé
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # CAMP ITEMS
  ########################

  /camps/{campId}/items:
    get:
      tags: [Items]
      summary: Récupérer tous les objets d'un camp
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Liste des objets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CampItem"
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
    post:
      tags: [Items]
      summary: Ajouter un objet à un camp
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - item_id
                - quantity
              properties:
                item_id:
                  {
                    type: string,
                    description: "ID de l'objet (référence à Item)",
                  }
                quantity:
                  {
                    type: integer,
                    minimum: 0,
                    description: "Quantité (entier positif)",
                  }
      responses:
        "201":
          description: Objet ajouté
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CampItem"
        "400":
          description: Données invalides
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur

  /camps/{campId}/item/{itemId}:
    get:
      tags: [Items]
      summary: Récupérer un objet spécifique d'un camp
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: itemId
          required: true
          schema: { type: string }
          description: ID de l'objet référencé (Item._id)
      responses:
        "200":
          description: Objet trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CampItem"
        "404":
          description: Camp ou objet non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [Items]
      summary: Mettre à jour un objet d'un camp
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: itemId
          required: true
          schema: { type: string }
          description: ID de l'objet référencé (Item._id)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - item_id
                - quantity
              properties:
                item_id:
                  {
                    type: string,
                    description: "ID de l'objet (référence à Item)",
                  }
                quantity:
                  {
                    type: integer,
                    minimum: 0,
                    description: "Quantité (entier positif)",
                  }
      responses:
        "200":
          description: Objet mis à jour - retourne la liste complète des items du camp
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CampItem"
        "400":
          description: Données invalides
        "404":
          description: Camp ou objet non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Items]
      summary: Supprimer un objet d'un camp
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: itemId
          required: true
          schema: { type: string }
          description: ID de l'objet référencé (Item._id)
      responses:
        "200":
          description: Objet supprimé
        "404":
          description: Camp ou objet non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # CAMP TRAININGS
  ########################

  /camps/trainings/nearest:
    get:
      tags: [Trainings]
      summary: Trouver l'entraînement le plus proche
      description: Recherche l'entraînement le plus proche d'une position GPS donnée. Route spéciale à placer avant /:campId/trainings pour éviter les conflits. Aucune authentification requise.
      parameters:
        - in: query
          name: latitude
          required: true
          schema: { type: number, minimum: -90, maximum: 90 }
          description: Latitude de la position
        - in: query
          name: longitude
          required: true
          schema: { type: number, minimum: -180, maximum: 180 }
          description: Longitude de la position
        - in: query
          name: maxDistance
          schema: { type: number, minimum: 0.1, default: 50 }
          description: Distance maximale de recherche en km (défaut 50)
      responses:
        "200":
          description: Entraînement le plus proche trouvé
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Training"
                  - type: object
                    properties:
                      _campId:
                        { type: string, description: "ID du camp parent" }
                      _distanceKm:
                        {
                          type: number,
                          description: "Distance en km (arrondi 2 décimales)",
                        }
        "404":
          description: Aucun entraînement trouvé dans le rayon spécifié
        "400":
          description: Paramètres invalides
        "500":
          description: Erreur interne du serveur

  /camps/{campId}/trainings:
    get:
      tags: [Trainings]
      summary: Récupérer les entraînements d'un camp
      description: Nécessite authentification (parent, accompagnant ou admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Liste des entraînements
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Training"
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
    post:
      tags: [Trainings]
      summary: Ajouter un entraînement
      description: Crée un nouvel entraînement avec fichier GPX optionnel. Nécessite authentification admin.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                number:
                  {
                    type: integer,
                    description: "Numéro unique de l'entraînement (optionnel - auto-généré)",
                  }
                date: { type: string, format: date }
                trainGoingTime: { type: string, example: "08:00" }
                meetingTime: { type: string, example: "08:30" }
                meetingPoint: { type: string, example: "Gare centrale" }
                returnTime: { type: string, example: "17:30" }
                trainReturnTime: { type: string, example: "18:00" }
                distance: { type: number, example: 12.5 }
                elevationGain: { type: integer, minimum: 0 }
                elevationLoss: { type: integer, minimum: 0 }
                remark: { type: string }
                responsiblePersonId:
                  {
                    type: string,
                    description: "ID de l'utilisateur responsable (ObjectId)",
                  }
                gpxFile:
                  {
                    type: string,
                    format: binary,
                    description: "Fichier GPX (optionnel)",
                  }
      responses:
        "201":
          description: Entraînement ajouté
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Training"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "404":
          description: Camp non trouvé
        "409":
          description: Numéro d'entraînement déjà existant
        "500":
          description: Erreur interne du serveur

  /camps/{campId}/trainings/{trainingId}:
    get:
      tags: [Trainings]
      summary: Récupérer un entraînement spécifique
      description: Nécessite authentification (parent, accompagnant ou admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
      responses:
        "200":
          description: Entraînement trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Training"
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "404":
          description: Camp ou entraînement non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [Trainings]
      summary: Modifier un entraînement
      description: Met à jour un entraînement existant. Nécessite authentification (parent, accompagnant ou admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: "Tous les champs sont optionnels"
              properties:
                date: { type: string, format: date }
                trainGoingTime: { type: string }
                meetingTime: { type: string }
                meetingPoint: { type: string }
                returnTime: { type: string }
                trainReturnTime: { type: string }
                distance: { type: number }
                elevationGain: { type: integer }
                elevationLoss: { type: integer }
                remark: { type: string }
                responsiblePerson:
                  {
                    type: string,
                    description: "ID de l'utilisateur responsable",
                  }
      responses:
        "200":
          description: Entraînement mis à jour
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Training"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "404":
          description: Camp ou entraînement non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Trainings]
      summary: Supprimer un entraînement
      description: Supprime un entraînement. Nécessite authentification (parent, accompagnant ou admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: campId
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
      responses:
        "200":
          description: Entraînement supprimé
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "404":
          description: Camp ou entraînement non trouvé
        "500":
          description: Erreur interne du serveur

  /camps/{id}/trainings/{trainingId}/items:
    get:
      tags: [Items]
      summary: Récupérer les objets d'un entraînement
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
      responses:
        "200":
          description: Liste des objets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CampItem"
        "404":
          description: Camp ou entraînement non trouvé
        "500":
          description: Erreur interne du serveur
    post:
      tags: [Items]
      summary: Ajouter un objet d'entraînement
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                itemId:
                  {
                    type: string,
                    description: "ID de l'objet (référence à Item)",
                  }
                quantity: { type: number }
      responses:
        "201":
          description: Objet ajouté
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CampItem"
        "400":
          description: Données invalides
        "404":
          description: Camp ou entraînement non trouvé
        "500":
          description: Erreur interne du serveur

  /camps/{id}/trainings/{trainingId}/items/{itemId}:
    put:
      tags: [Items]
      summary: Modifier un objet d'entraînement
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
        - in: path
          name: itemId
          required: true
          schema: { type: string }
          description: ID de l'objet dans la liste
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                itemId:
                  {
                    type: string,
                    description: "ID de l'objet (référence à Item)",
                  }
                quantity: { type: number }
      responses:
        "200":
          description: Objet modifié
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CampItem"
        "400":
          description: Données invalides
        "404":
          description: Camp, entraînement ou objet non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Items]
      summary: Supprimer un objet d'entraînement
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: trainingId
          required: true
          schema: { type: string }
          description: ID de l'entraînement
        - in: path
          name: itemId
          required: true
          schema: { type: string }
          description: ID de l'objet dans la liste
      responses:
        "200":
          description: Objet supprimé
        "404":
          description: Camp, entraînement ou objet non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # HIKES
  ########################

  /hikes:
    get:
      tags: [Hikes]
      summary: Récupérer toutes les randonnées
      description: Retourne la liste de toutes les randonnées (posts avec images). Nécessite authentification avec rôle accompagnant ou admin.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Liste des randonnées
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Hike"
                  pagination:
                    type: object
                    properties:
                      page: { type: integer }
                      limit: { type: integer }
                      total: { type: integer }
                      pages: { type: integer }
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôles accompagnant ou admin requis)
        "500":
          description: Erreur interne du serveur
    post:
      tags: [Hikes]
      summary: Créer une randonnée
      description: Crée une nouvelle randonnée avec un contenu texte et une image optionnelle. Nécessite authentification avec rôle accompagnant ou admin.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - userId
                - content
              properties:
                userId:
                  {
                    type: string,
                    description: "ID de l'utilisateur (ObjectId)",
                  }
                content:
                  {
                    type: string,
                    maxLength: 2000,
                    description: "Contenu texte de la randonnée",
                  }
                image:
                  {
                    type: string,
                    format: binary,
                    description: "Image de la randonnée (optionnelle)",
                  }
      responses:
        "201":
          description: Randonnée créée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Hike"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôles accompagnant ou admin requis)
        "500":
          description: Erreur interne du serveur

  /hikes/{hikeId}:
    delete:
      tags: [Hikes]
      summary: Supprimer une randonnée
      description: Supprime une randonnée. Nécessite authentification avec rôle accompagnant ou admin.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: hikeId
          required: true
          schema: { type: string }
          description: ID de la randonnée
      responses:
        "204":
          description: Randonnée supprimée
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôles accompagnant ou admin requis)
        "404":
          description: Randonnée non trouvée
        "500":
          description: Erreur interne du serveur

  ########################
  # ITEMS (GLOBAL)
  ########################

  /items:
    get:
      tags: [Items]
      summary: Récupérer tous les objets du répertoire
      description: Retourne la liste de tous les items. Nécessite authentification admin.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Liste de tous les objets du répertoire
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Item"
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "500":
          description: Erreur interne au serveur
    post:
      tags: [Items]
      summary: Ajouter un objet au répertoire
      description: Crée un nouvel item. Nécessite authentification admin.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - slug
                - name
              properties:
                slug:
                  {
                    type: string,
                    description: "Identifiant unique en format slug",
                  }
                name: { type: string, description: "Nom unique de l'objet" }
                description: { type: string }
      responses:
        "201":
          description: Objet ajouté au répertoire
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Item"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "500":
          description: Erreur interne au serveur

  /items/{id}:
    get:
      tags: [Items]
      summary: Récupérer un objet spécifique
      description: Retourne un item par son ID. Nécessite authentification admin.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID de l'objet
      responses:
        "200":
          description: Objet trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Item"
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "404":
          description: Objet non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [Items]
      summary: Modifier un objet du répertoire
      description: Met à jour un item existant. Nécessite authentification admin.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID de l'objet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                slug:
                  {
                    type: string,
                    description: "Identifiant unique en format slug",
                  }
                name: { type: string, description: "Nom unique de l'objet" }
                description: { type: string }
      responses:
        "200":
          description: Objet modifié
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Item"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "404":
          description: Objet non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Items]
      summary: Supprimer un objet du répertoire
      description: Supprime un item. Nécessite authentification admin.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID de l'objet
      responses:
        "200":
          description: Objet supprimé du répertoire
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "404":
          description: Objet non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # FUNDRAISINGS
  ########################

  /camps/{id}/fundraisings:
    get:
      tags: [Fundraisings]
      summary: Récupérer les ventes pour un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Liste des ventes pour un camp
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Fundraising"
        "403":
          description: Accès refusé
        "500":
          description: Erreur interne au serveur
        "404":
          description: Camp non trouvé
    post:
      tags: [Fundraisings]
      summary: Ajouter une vente à un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - number
              properties:
                number:
                  { type: number, description: "Numéro unique de la vente" }
                dateTime: { type: string, format: date-time }
                location: { type: string }
                participants:
                  type: array
                  items:
                    type: string
                    description: "ID de l'utilisateur participant"
      responses:
        "201":
          description: Vente ajoutée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Fundraising"
        "400":
          description: Données invalides
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur

  /camps/{id}/fundraisings/{fundraisingId}:
    get:
      tags: [Fundraisings]
      summary: Récupérer une vente d'un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: fundraisingId
          required: true
          schema: { type: string }
          description: ID de la vente
      responses:
        "200":
          description: Vente trouvée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Fundraising"
        "404":
          description: Camp ou vente non trouvé
        "500":
          description: Erreur interne du serveur
        "400":
          description: Données invalides
        "403":
          description: Accès refusé
    put:
      tags: [Fundraisings]
      summary: Modifier une vente (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: fundraisingId
          required: true
          schema: { type: string }
          description: ID de la vente
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                number:
                  { type: number, description: "Numéro unique de la vente" }
                dateTime: { type: string, format: date-time }
                location: { type: string }
                participants:
                  type: array
                  items:
                    type: string
                    description: "ID de l'utilisateur participant"
      responses:
        "200":
          description: Vente modifiée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Fundraising"
        "400":
          description: Données invalides
        "404":
          description: Camp ou vente non trouvé
        "500":
          description: Erreur interne du serveur
        "403":
          description: Accès refusé
    delete:
      tags: [Fundraisings]
      summary: Supprimer une vente (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: fundraisingId
          required: true
          schema: { type: string }
          description: ID de la vente
      responses:
        "200":
          description: Vente supprimée
        "404":
          description: Camp ou vente non trouvé
        "500":
          description: Erreur interne du serveur
        "403":
          description: Accès refusé

  ########################
  # STAGES
  ########################

  /camps/{id}/stages:
    get:
      tags: [Étapes]
      summary: Récupérer les étapes d'un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Liste des étapes d'un camp
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Stage"
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
        "403":
          description: Accès refusé
    post:
      tags: [Étapes]
      summary: Ajouter une étape à un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - number
              properties:
                number:
                  { type: number, description: "Numéro unique de l'étape" }
                date: { type: string, format: date-time }
                startPoint: { type: string }
                endPoint: { type: string }
                distance: { type: number }
                elevationGain: { type: number }
                elevationLoss: { type: number }
                routeDescription: { type: string }
      responses:
        "201":
          description: Étape ajoutée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Stage"
        "400":
          description: Données invalides
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur

  /camps/{id}/stages/{stageId}:
    get:
      tags: [Étapes]
      summary: Récupérer une étape d'un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: stageId
          required: true
          schema: { type: string }
          description: ID de l'étape
      responses:
        "200":
          description: Étape trouvée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Stage"
        "404":
          description: Camp ou étape non trouvé
        "500":
          description: Erreur interne du serveur
        "403":
          description: Accès refusé
    put:
      tags: [Étapes]
      summary: Modifier une étape (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: stageId
          required: true
          schema: { type: string }
          description: ID de l'étape
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                number:
                  { type: number, description: "Numéro unique de l'étape" }
                date: { type: string, format: date-time }
                startPoint: { type: string }
                endPoint: { type: string }
                distance: { type: number }
                elevationGain: { type: number }
                elevationLoss: { type: number }
                routeDescription: { type: string }
      responses:
        "200":
          description: Étape modifiée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Stage"
        "400":
          description: Données invalides
        "404":
          description: Camp ou étape non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Étapes]
      summary: Supprimer une étape d'un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID du camp
        - in: path
          name: stageId
          required: true
          schema: { type: string }
          description: ID de l'étape
      responses:
        "200":
          description: Étape supprimée
        "404":
          description: Camp ou étape non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # AG
  ########################

  /camps/{id}/ag:
    get:
      tags: [AG]
      summary: Récupérer l'AG d'un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: AG trouvée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GeneralMeeting"
        "404":
          description: Camp ou AG non trouvé
        "500":
          description: Erreur interne du serveur
    post:
      tags: [AG]
      summary: Ajouter une AG à un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                dateTime: { type: string, format: date-time }
                location: { type: string }
                participants:
                  type: array
                  items:
                    $ref: "#/components/schemas/Participant"
      responses:
        "201":
          description: AG ajoutée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GeneralMeeting"
        "400":
          description: Données invalides
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [AG]
      summary: Modifier l'AG d'un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                dateTime: { type: string, format: date-time }
                location: { type: string }
                participants:
                  type: array
                  items:
                    $ref: "#/components/schemas/Participant"
      responses:
        "200":
          description: AG modifiée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GeneralMeeting"
        "400":
          description: Données invalides
        "404":
          description: Camp ou AG non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [AG]
      summary: Supprimer une AG (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: AG supprimée
        "404":
          description: Camp ou AG non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # INFORMATION EVENING
  ########################

  /camps/{id}/information-evening:
    get:
      tags: [InformationEvening]
      summary: Récupérer une soirée d'information (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: Soirée trouvée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InformationEvening"
        "404":
          description: Camp ou IE non trouvé
        "500":
          description: Erreur interne du serveur
    post:
      tags: [InformationEvening]
      summary: Ajouter une soirée d'information à un camp (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                dateTime: { type: string, format: date-time }
                location: { type: string }
                participants:
                  type: array
                  items:
                    $ref: "#/components/schemas/Participant"
      responses:
        "201":
          description: IE ajoutée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InformationEvening"
        "400":
          description: Données invalides
        "404":
          description: Camp non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [InformationEvening]
      summary: Modifier une soirée d'information (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                dateTime: { type: string, format: date-time }
                location: { type: string }
                participants:
                  type: array
                  items:
                    $ref: "#/components/schemas/Participant"
      responses:
        "200":
          description: IE modifiée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InformationEvening"
        "400":
          description: Données invalides
        "404":
          description: Camp ou IE non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [InformationEvening]
      summary: Supprimer une soirée d'information (NON IMPLÉMENTÉ)
      description: Cette route n'est pas encore implémentée dans le code
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: string }
          description: ID du camp
      responses:
        "200":
          description: IE supprimée
        "404":
          description: Camp ou IE non trouvé
        "500":
          description: Erreur interne du serveur

  ########################
  # USERS
  ########################

  /users:
    get:
      tags: [Users]
      summary: Récupérer la liste de tous les utilisateurs
      description: Retourne tous les utilisateurs. Nécessite authentification (rôle parent minimum).
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Liste des utilisateurs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "500":
          description: Erreur interne du serveur
    post:
      tags: [Users]
      summary: Créer un enfant (pour un parent authentifié)
      security:
        - bearerAuth: []
      description: |
        Crée un nouvel utilisateur enfant. Nécessite authentification (rôle parent minimum).

        **Comportement selon le rôle :**
        - **Parent** : Le rôle est forcé à "enfant" et la propriété `parent` est automatiquement définie avec l'ID du parent créateur.
        - **Admin** : Peut créer un utilisateur avec n'importe quel rôle.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - lastname
                - firstname
              properties:
                role:
                  type: array
                  items:
                    type: string
                    enum: ["admin", "accompagnant", "parent", "enfant"]
                  description: "Tableau de rôles (défaut: [enfant])"
                lastname: { type: string, minLength: 1, maxLength: 20 }
                firstname: { type: string, minLength: 1, maxLength: 20 }
                email:
                  {
                    type: string,
                    format: email,
                    description: "Email unique (optionnel)",
                  }
                password:
                  {
                    type: string,
                    minLength: 6,
                    description: "Requis si email fourni",
                  }
                phoneNumber:
                  { type: string, description: "Format: +41794567895" }
                address:
                  type: object
                  properties:
                    street: { type: string }
                    city: { type: string }
                    postalCode: { type: integer }
                    country: { type: string }
                parent: { type: string, description: "ID du parent (ObjectId)" }
                children:
                  type: array
                  items: { type: string }
                  description: "IDs des enfants (ObjectIds)"
                camps:
                  type: array
                  items: { type: string }
                  description: "IDs des camps (ObjectIds)"
                participationInfo:
                  type: object
                  properties:
                    birthDate: { type: string, format: date }
                    tshirtInfo:
                      type: object
                      properties:
                        size:
                          {
                            type: string,
                            enum: ["xxs", "xs", "s", "m", "l", "xl", "xxl"],
                          }
                        gender: { type: string, enum: ["m", "f"] }
                    allergies:
                      type: array
                      items: { type: string }
                    medication:
                      type: array
                      items: { type: string }
                    insuranceNumber: { type: string }
                    insuranceName: { type: string }
                    idExpireDate: { type: string, format: date }
                    publicTransportPass:
                      { type: string, enum: ["AG", "demi-tarif", "aucun"] }
                    isCASMember: { type: boolean }
                    isHelicopterInsured: { type: boolean }
                    hasPhotoConsent: { type: boolean }
                    hasPaid: { type: boolean }
      responses:
        "201":
          description: Utilisateur créé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "500":
          description: Erreur interne du serveur

  /users/{id}:
    get:
      tags: [Users]
      summary: Récupérer un utilisateur
      description: Retourne un utilisateur par son ID. Nécessite authentification (rôle parent minimum).
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID de l'utilisateur
      responses:
        "200":
          description: Utilisateur trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé
        "404":
          description: Utilisateur non trouvé
        "500":
          description: Erreur interne du serveur
    put:
      tags: [Users]
      summary: Modifier un utilisateur
      security:
        - bearerAuth: []
      description: |
        Met à jour un utilisateur existant. Nécessite authentification (rôle parent minimum).

        **Permissions :**
        - Un **admin** peut modifier n'importe quel utilisateur.
        - Un **parent** peut modifier son propre profil ou celui de ses enfants (utilisateurs ayant son ID comme propriété `parent`).
        - Toute autre tentative retourne une erreur 403.
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID de l'utilisateur
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: "Tous les champs sont optionnels (mêmes propriétés que POST)"
              properties:
                role:
                  type: array
                  items:
                    type: string
                    enum: ["admin", "accompagnant", "parent", "enfant"]
                lastname: { type: string, minLength: 1, maxLength: 20 }
                firstname: { type: string, minLength: 1, maxLength: 20 }
                email: { type: string, format: email }
                password: { type: string, minLength: 6 }
                phoneNumber: { type: string }
                address:
                  type: object
                  properties:
                    street: { type: string }
                    city: { type: string }
                    postalCode: { type: integer }
                    country: { type: string }
                parent: { type: string }
                children:
                  type: array
                  items: { type: string }
                camps:
                  type: array
                  items: { type: string }
                participationInfo:
                  type: object
                  properties:
                    birthDate: { type: string, format: date }
                    tshirtInfo:
                      type: object
                      properties:
                        size:
                          {
                            type: string,
                            enum: ["xxs", "xs", "s", "m", "l", "xl", "xxl"],
                          }
                        gender: { type: string, enum: ["m", "f"] }
                    allergies:
                      type: array
                      items: { type: string }
                    medication:
                      type: array
                      items: { type: string }
                    insuranceNumber: { type: string }
                    insuranceName: { type: string }
                    idExpireDate: { type: string, format: date }
                    publicTransportPass:
                      { type: string, enum: ["AG", "demi-tarif", "aucun"] }
                    isCASMember: { type: boolean }
                    isHelicopterInsured: { type: boolean }
                    hasPhotoConsent: { type: boolean }
                    hasPaid: { type: boolean }
      responses:
        "200":
          description: Utilisateur modifié
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Données invalides
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (vous ne pouvez modifier que votre profil ou celui de vos enfants)
        "404":
          description: Utilisateur non trouvé
        "500":
          description: Erreur interne du serveur
    delete:
      tags: [Users]
      summary: Supprimer un utilisateur
      description: Supprime un utilisateur. Nécessite authentification avec rôle admin.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
          description: ID de l'utilisateur
      responses:
        "200":
          description: Utilisateur supprimé
        "401":
          description: Non authentifié
        "403":
          description: Accès refusé (rôle admin requis)
        "404":
          description: Utilisateur non trouvé
        "500":
          description: Erreur interne du serveur

#############################
# SCHEMAS
#############################

components:
  schemas:
    ####################################
    # USER
    ####################################
    User:
      type: object
      required:
        - role
        - lastname
        - firstname
      properties:
        _id: { type: string, description: "MongoDB ObjectId" }
        role:
          type: array
          items:
            type: string
            enum: ["admin", "accompagnant", "parent", "enfant"]
        lastname:
          type: string
          minLength: 1
          maxLength: 50
          example: "Dupont"
        firstname:
          type: string
          minLength: 1
          maxLength: 50
          example: "Jean"
        email:
          type: string
          format: email
          example: "jean.dupont@example.com"
        phoneNumber:
          type: string
        address:
          type: object
          properties:
            street: { type: string }
            city: { type: string }
            postalCode: { type: number }
            country: { type: string }
        parent:
          type: string
          example: "60d0fe4f5311236168a109ca"
        children:
          type: array
          items: { type: string }
        camps:
          type: array
          items: { type: string }
        participationInfo:
          type: object
          properties:
            birthDate:
              type: string
              format: date
              example: "2005-06-15"
            tshirtInfo:
              type: object
              properties:
                size:
                  type: string
                  enum: ["xxs", "xs", "s", "m", "l", "xl", "xxl"]
                  example: "m"
                gender:
                  type: string
                  enum: ["m", "f"]
                  example: "f"
            allergies:
              type: array
              items: { type: string }
            medication:
              type: array
              items: { type: string }
            insuranceNumber: { type: string }
            insuranceName: { type: string }
            idExpireDate:
              type: string
              format: date
              example: "2026-12-31"
            publicTransportPass:
              type: string
              enum: ["AG", "demi-tarif", "aucun"]
            isCASMember: { type: boolean }
            isHelicopterInsured: { type: boolean }
            hasPhotoConsent: { type: boolean }
            hasPaid: { type: boolean }

    ####################################
    # CAMP
    ####################################
    Camp:
      type: object
      required:
        - title
      properties:
        _id: { type: string, description: "MongoDB ObjectId" }
        title: { type: string, example: "Camp de marche 2025" }
        startDate:
          type: string
          format: date-time
          example: "2025-07-01T00:00:00Z"
        endDate:
          type: string
          format: date-time
          example: "2025-07-15T23:59:59Z"
        subStartDatetime:
          type: string
          format: date-time
          example: "2025-03-01T09:00:00Z"
        subEndDatetime:
          type: string
          format: date-time
          example: "2025-05-31T23:59:59Z"
        gpsTrack:
          type: object
          description: "Objet JSON représentant le tracé GPS (structure non spécifiée)"
        itemsList:
          type: array
          items:
            $ref: "#/components/schemas/CampItem"
        infoEvening:
          $ref: "#/components/schemas/InformationEvening"
        trainings:
          type: array
          items:
            $ref: "#/components/schemas/Training"
        fundraisings:
          type: array
          items:
            $ref: "#/components/schemas/Fundraising"
        generalMeeting:
          $ref: "#/components/schemas/GeneralMeeting"
        stages:
          type: array
          items:
            $ref: "#/components/schemas/Stage"
        createdAt:
          {
            type: string,
            format: date-time,
            description: "Timestamp de création",
          }
        updatedAt:
          {
            type: string,
            format: date-time,
            description: "Timestamp de dernière modification",
          }

    CampItem:
      type: object
      properties:
        item:
          type: string
          description: "ID de l'objet (référence à Item)"
        quantity: { type: number }

    ####################################
    # INFORMATION EVENING
    ####################################
    InformationEvening:
      type: object
      properties:
        dateTime:
          type: string
          format: date-time
          example: "2025-06-15T18:00:00Z"
        location: { type: string, example: "Salle des fêtes, Lausanne" }
        participants:
          type: array
          items:
            $ref: "#/components/schemas/Participant"

    ####################################
    # TRAINING
    ####################################
    Training:
      type: object
      required:
        - number
      properties:
        _id: { type: string, description: "MongoDB ObjectId du sous-document" }
        number:
          {
            type: integer,
            example: 1,
            description: "Numéro unique de l'entraînement",
          }
        year:
          {
            type: integer,
            example: 2025,
            description: "Année (auto-générée depuis date)",
          }
        date:
          type: string
          format: date-time
          example: "2025-07-02T00:00:00Z"
        trainGoingTime: { type: string, example: "08:00" }
        trainReturnTime: { type: string, example: "18:00" }
        meetingTime: { type: string, example: "08:30" }
        meetingPoint: { type: string, example: "Gare centrale" }
        returnTime: { type: string, example: "17:30" }
        distance: { type: number, example: 12.5 }
        elevationGain: { type: integer, example: 300 }
        elevationLoss: { type: integer, example: 200 }
        gpsTrack:
          type: object
          description: "Tracé GPS GeoJSON LineString"
          properties:
            type: { type: string, enum: ["LineString"] }
            coordinates:
              type: array
              items:
                type: array
                items: { type: number }
                minItems: 2
                maxItems: 2
              description: "Tableau de coordonnées [[lng, lat], ...]"
        responsiblePerson:
          type: string
          description: "ID de l'utilisateur responsable (ObjectId)"
        itemsList:
          type: array
          items:
            type: object
            properties:
              itemId:
                {
                  type: string,
                  description: "ID de l'objet (référence à Item)",
                }
              quantity: { type: integer }
        remark: { type: string, example: "Prévoir des chaussures imperméables" }

    ####################################
    # FUNDRAISING
    ####################################
    Fundraising:
      type: object
      required:
        - number
      properties:
        _id: { type: string, description: "MongoDB ObjectId du sous-document" }
        number:
          {
            type: integer,
            example: 1,
            description: "Numéro unique de la vente",
          }
        year:
          {
            type: integer,
            example: 2025,
            description: "Année (auto-générée depuis dateTime)",
          }
        dateTime:
          type: string
          format: date-time
          example: "2025-06-20T19:00:00Z"
        location: { type: string, example: "Café du Marché, Lausanne" }
        participants:
          type: array
          items:
            type: string
            description: "ID de l'utilisateur (ObjectId)"
          example: ["60d0fe4f5311236168a109ca"]

    ####################################
    # GENERAL MEETING
    ####################################
    GeneralMeeting:
      type: object
      properties:
        dateTime:
          type: string
          format: date-time
          example: "2025-07-10T19:00:00Z"
        location: { type: string, example: "Salle des fêtes" }
        participants:
          type: array
          items:
            $ref: "#/components/schemas/Participant"

    ####################################
    # STAGE
    ####################################
    Stage:
      type: object
      required:
        - number
      properties:
        _id: { type: string, description: "MongoDB ObjectId du sous-document" }
        number:
          { type: integer, example: 1, description: "Numéro unique de l'étape" }
        year:
          {
            type: integer,
            example: 2025,
            description: "Année (auto-générée depuis date)",
          }
        date:
          type: string
          format: date-time
          example: "2025-07-03T00:00:00Z"
        startPoint: { type: string, example: "Col de Jaman" }
        endPoint: { type: string, example: "Château-d'Oex" }
        distance: { type: number, example: 15.2 }
        elevationGain: { type: integer, example: 500 }
        elevationLoss: { type: integer, example: 300 }
        routeDescription:
          { type: string, example: "Par le sentier des alpages" }

    ####################################
    # HIKE
    ####################################
    Hike:
      type: object
      required:
        - user
        - content
      properties:
        _id: { type: string, description: "MongoDB ObjectId" }
        user:
          type: string
          description: "ID de l'utilisateur ayant créé la randonnée (ObjectId)"
        content:
          type: string
          maxLength: 2000
          description: "Contenu texte de la randonnée"
          example: "Belle randonnée aujourd'hui au Col de Jaman!"
        imageUrl:
          type: string
          format: uri
          description: "URL de l'image uploadée (Cloudinary)"
          example: "https://res.cloudinary.com/..."
        createdAt:
          type: string
          format: date-time
          description: "Timestamp de création (auto-généré)"
        updatedAt:
          type: string
          format: date-time
          description: "Timestamp de dernière modification (auto-généré)"

    ####################################
    # PARTICIPANT
    ####################################
    Participant:
      type: object
      properties:
        email:
          type: string
          format: email
          example: "participant@example.com"
        nbOfParticipants: { type: integer, example: 1 }

    ####################################
    # ITEM (GLOBAL)
    ####################################
    Item:
      type: object
      required:
        - slug
        - name
      properties:
        _id: { type: string, description: "ID MongoDB" }
        slug: { type: string, description: "Identifiant unique en format slug" }
        name: { type: string, description: "Nom unique de l'objet" }
        description: { type: string }

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "JWT Bearer token obtenu via /login"

tags:
  - name: Authentication
    description: Authentification utilisateur
  - name: Camps
    description: Gestion des camps
  - name: Trainings
    description: Entraînements liés aux camps
  - name: Items
    description: Objets disponibles
  - name: Hikes
    description: Randonnées effectuées
  - name: Étapes
    description: Étapes du camp
  - name: Fundraisings
    description: Activités de financement
  - name: AG
    description: Assemblées générales du camp
  - name: InformationEvening
    description: Soirées d'information du camp
  - name: Users
    description: Gestion des utilisateurs
